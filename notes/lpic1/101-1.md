# 101-1 Determine and Configure Hardware Settings

![OS, Hardware, and Firmware Diagram](./photos/os-firmware-hardware.png)

- **BIOS**: Basic Input/Output system. Older firmware on motherboards. It loads OS from
  the first partition of the disk(MBR). It may not be efficient and sufficient for
  modern operating systems.
- **UEFI**: Unified extensible firmware interface. Use specific disk partitions for boot
  and uses FAT. -> /boot -> efi.

## Peripheral Devices

PCI: Peripheral Component Interconnect. -> Ports which let hardware boards be added on
the motherboard. Such as:

- Internal HDD
- External HDD
- Network Cards
- Bluetooth Dangles

### USB

USB: Universal Serial Bus

![USB](./photos/usb.png)

### GPIO

GPIO: General Purpose Input/Output. These are pins on a computer or an embedded device
that can be programmed to receive and send electric signals. -> Managed at
`/sys/class/gpio`.

## Sysfs

Sysfs is a pseudo/virtual file system in kernel's memory. Sysfs is mounted under `/sys`.
Devices shown in the `/sys` are not actually a userspace for working with them, it is
just a way kernel telling you what's going on with the hardware devices. It exports
information about various kernel subsystems, hardware devices, and associated device
drivers from kernel device model to userspace through virtual files. It provides info
about devices and drivers.

- **/sys/class/net/**: Shows network interfaces.
- **/sys/block/**: Shows block devices (hard drives, etc).

## Udev

Udev(userspace devices) is a device manager for the Linux Kernel. It abstracts away the
hardware details. It is mounted under `/dev`. It contains device files that represents
hardware devices.

There are two different ways to access data on a computer. One is called block-device
interface(BDI) and the other one is called character-device interface(CDI).

- CDI: A device which communicate with streams of characters. Like keyboards and sound
  cards. It basically receive and send single characters. BDI: In the contrast of
  character-device interfaces, these devices communicate data in chunks, not a stream of
  characters. Like hard disks.

- **/dev/sda**: First SATA/SCSI disks.

- **/dev/tty**: Terminal devices.

### Terminal

A terminal is just a place where you can type and execute commands. Additionally, a
terminal device is a system file that represents a terminal.

> ðŸ’¡ Linux exposes everything as files.

There are 3 types of terminal devices:

- Virtual Consoles(TTY): These are the real terminals. You can use them using:

  ```txt
  Ctrl + Alt + [Fn] + F1, ..., F6
  ```

Each one is a terminal device:

```bash
ls /dev
tty tty0 tty1 tty01 tty1 ...
```

- PseudoTerminals(PTY): These are the terminals created by softwares(Gnome Terminal, SSH
  sessions, VS Code terminals, etc). These are mounted at `/dev/pts/`.

  ```bash
  root@ideapad:/dev/pts# tty
  /dev/pts/3
  ```

  Voila, I am inside a pseudoterminal(I am using gnome terminal).

- The current terminal: The controlling terminal of the current process.

  - The command for seeing the current terminal device: `tty`.

  ```bash
  echo "Hello, World" > /dev/tty
  Hello, World
  ```

> Each terminal session gets its own device file.

#### Historical / Hardware Terminals

These are historical devices with a keyboard and monitor, which they was able to do not
more than displaying the things comes from the wire and return what comes from the
keyboard.

> The real keyboard + monitor attached to the machine is represented by: `/dev/console`
> By the way, `/dev/ttyS0, ...` are physical serial ports(hardware terminals).

## Dbus

A message bus system, a simple way for applications to talk to each other.

## Proc

Pseudo filesystem that shows processes as file and some other things like `cpuinfo`,
`meminfo`, and some kernel settings. It is created on ram.

## Commands

- lsusb -> List usb devices.
- lsblk -> List block devices.
- lspci -> List PCI devices.
- lshw -> List hardware details.

## Kernel Modules

Kernel modules are the derivers in linux. They are loaded lazily. Most of them are
built-in. For preventing the kernel to load all at once, linux uses kernel modules(.ko
files). They are object files that are used to extend the kernel's functionality.

**Commands**:

- lsmod -> Show the status of modules in the Linux kernel -> Beautify `/proc/modules`
  contents.
- rmmod -> Remove a kernel module.
- insmod -> Insert a module into the kernel. You should specify the full path of module.
- modprobe -> Add or remove(mostly add) a module into the kernel. You can just send the
  name.
  - modprobe -r -> Remove the kernel module.
- modinfo -> Give information about the device.

## Other Things

- IRQ(Interrupt Request): Hardware lines used by devices to signal the CPU. Mounted at:
  `/proc/irq`

- I/O Ports: Memory addresses for device communication. Mounted at: `/proc/ioport`.

- DMA(Direct Memory Access): Allow devices to access memory without cpu intervention.
  Mounted at `/proc/dma`.

- **Cold Plug**: Devices present at boot time.

- **Warm Plug**: Devices that are added or removed while system is running.
