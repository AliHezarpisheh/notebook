# Process Text Streams using Filters

In the Unix world, a lot of data is in the text format. This was actually one of the
ideas of unix. Filtering these data means applying conversions to the text before
sending them to the standard output. In the current context, `streams` are no more than
sequence of bytes that can be read or written using library functions and tools which
hide the details of an underlying device from the application.

So in simple words, a text stream is a sequence of characters input from the keyboard, a
file, or a network device, which can be viewed, changed, or examined via text utils
commands.

Modern programming environments and shells(including bash) use three standard I/O
streams:

- `stout`: Standard output stream. Display output from commands.
- `stdin`: Standard input stream. Provides input to commands.
- `stderr`: Standard error stream. Display error output from commands.

In this lesson, we would talk about `stdin`.

## Viewing Commands

### cat

This command simply outputs its input streams(mostly a file). It concatenates files and
prints on the standard output.

You can use `Ctrl + d` to end the stream. `Ctrl + c` will end the program. It is more
aggressive.

There are some helpful switches such as `-n` showing number lines, `-s` to squeeze
blanks, `-T` to show tabs, and `-v` to show non-printing characters.

> cat have some siblings such as xzcat, bzcat, zcat, and gzcat. They are used to
> directly read xz, bz, z, and gz compressed files, respectively.

### less

`less` is a more powerful command for larger text files. It can move in the file,
search, and paginate the file.

There is another command named `more` like this command. Do not use it. It is not cool.

less common commands:

| Command                               | Usage                   |
| ------------------------------------- | ----------------------- |
| q                                     | Quit less               |
| /foo                                  | Search for foo          |
| ?foo                                  | Search backward for foo |
| n                                     | Next (in search)        |
| N                                     | Previous (in search)    |
| G                                     | Go to end               |
| 10G                                   | Go to line 10           |
| Down Arrow + Up Arrow + PgDown + PgUp | Guess!                  |

### od

`od` displays the raw binary contents of a file in human-readable numeric form(default
to octal).

```bash
od -t a file.txt  # -t tells how format to print, `a` showing only named characters

od -t c file.txt  # `c` showing escaped characters.

od -c file.txt  # same as the above command. Same is applicable for `-t a`.

od -c -A d file.txt  # -A is for specifying how to present offset field. d, o, h, and n
# are available. Can you guess which is which:)?
```

## Choosing Parts of Files

### split

`split` will basically split the files:) Useful for split a huge file into smaller ones
and move them.

We use it like: **split [OPTION]... \[FILE [PREFIX]\]**

```bash
split -l 50 101-1.md lpic
ls
101-1.md  lpicaa  lpicab  lpicac  lpicad

split -d -l 50 101-1.md lpic
ls
101-1.md  lpic00  lpic01  lpic02  lpic03
```

`-l` stands for lines. `-d` is for making the suffixes numeric. `-b` stands for bytes.

> Need to join them? do \`cat lpic\* > lpic.md

### head and tail

Will show the beginning(head) and the end(tail) of the files. By default, it shows 10
lines but you can change it using `-n20` or `-20`. Also, you know how much `-f` switch
is useful.

### cut

It will cut one or more columns from a file. It is useful while analyzing `csv` files.

```bash
!cat
cat howcool.txt
jadi    5
sina    6
rubic    2
you     12

cut -d" " -f1 howcool.txt
jadi
sina
rubic
you

cut -d" " -f2 howcool.txt




cut -d" " -f3 howcool.txt




cut -d" " -f6 howcool.txt



12
```

`-d<sth>` is for specifying the delimiter. -fn is for specifying the columns. You can
use it like `-f1,f2` or `f1-5`.

## Modifying Streams

### nl

Show line numbers. Like `cat -n`.

### sort and uniq

`sort` will sort its input. It works like the `.sort()` function in Python. It has
interesting switches such as `-n` for numerical sort and `-r` for reverse sort.

`uniq` removes duplicate entries from its input. You have to be sorted for uniq to work.
It has some cool switches.

```bash

sort not-sorted.txt | uniq
1
2
3
4
5
6
8

sort not-sorted.txt | uniq -c
      1 1
      1 2
      1 3
      1 4
      1 5
      2 6
      1 8

sort not-sorted.txt | uniq --repeated
6

sort not-sorted.txt | uniq -d
6

sort not-sorted.txt | uniq -u
1
2
3
4
5
8
```

### paste

Merge file lines. `-d` is for specifying the delimiter. By default, it is a tab.

### tr

Translate or delete characters. It is a pure filter and doesn't accept the input file
name so you should pipe it to other commands.

```bash
head -n1 101-1.md | tr " " "$"
$101-1$Determine$and$Configure$Hardware$Settings
```

### sed

`sed` is a super powerful stream editor for filtering and transforming text. It uses
regular expressions. If you need to install the first occurrence of A with B in every
line, just use `sed 's/A/B/' file.txt` and for changing all occurrences of A with B in
every line use `sed 's/A/B/g' file.txt`.

## Getting Stats

### wc

Prints new line, word, and byte counts of each file.

```bash
wc lpic09
10  38 255 lpic09
```

### md5sum, sha256sum, and sha512sum

These are hashing functions. You know what are hashes and hashing are, don't you:)? A
hash function is a function which creates a fixed length output for every input. It will
return the same result every time you get it the exact same input. Modifying the input
will result in a complete hash.

We use hashing and hashes for checking the checking the integrity of data(or probably
anything else like an executable file or an ISO image of an OS). Also we use them for
password management in the software engineering realm. They have more use cases too.

```bash
sha256sum lpic01
387a4ec526958558c04041ac535318b40db19921b7037524978c50a81b0a5e60  lpic01

sha512sum lpic01
1a47101ba1e72b686fa9f1780b73fae9018376325a123cc2e6a9a639536a4c3c...  lpic01

md5sum lpic01
2ceb936944c7d8c6a9383476e67db297  lpic01
```
